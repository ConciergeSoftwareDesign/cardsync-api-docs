{
	"info": {
		"_postman_id": "744582cd-b07b-440b-9fcd-24d868c0fefe",
		"name": "eVoke Partner",
		"description": "# eVoke Api Documentation\n\n### Overview\nThe eVoke API allows you to remotely invoke a credit card transaction on a PAX device from another system.  If you have not already, please contact the Paylani team to become an onboarded partner.\n\nDuring the onboarding process, your partner account will be given an application token, merchant Id(s), and Merchant Location Id(s).\n\nPlease substitute these values with the api documentation variables as follows:\n\n**{{PartnerId}}** = your eVoke assigned partner id\n\n**{{MerchantId}}** = The eVoke assigned merchant id\n\n**{{MerchantLocationId}}** = The eVoke assigned merchant location id\n\n**{{TerminalSerialNumber}}** = The Pax terminal serial number (usually found on the back of your pax device)\n\n**{{SaleId}}** = The eVoke assigned sale id (generated after initiating a charge transaction)\n\n**{{TransactionId}}** = The eVoke assigned transaction id (generated after initiating any transaction)\n\n**{{ApplicationToken}}** = Your eVoke assigned partner application token\n\n**{{eVokeUrl}}** = The environment specific api url:\n\n* **Development: https://evokeapi-dev.azurewebsites.net/api**\n\n* **Production: https://evokeapi.azurewebsites.net/api**\n\n**The postman collection representing this api documentation can be found here: https://www.getpostman.com/collections/8ad516d3327e4c7ad32a**\n\n#### Headers\nAll endpoints require the ApplicationToken header key and corresponding {{ApplicationToken}} value.\nThe Charge, Cancel, Refund, and Signature endpoints require the TerminalSerialNumber header key and corresponding {{TerminalSerialNumber}} value.\n\n#### Sales and Transactions\nSales are composed of many transactions, with contextual details from the starting charge transaction.\n\n\n------------\n\n\n### Charging a card (Charge endpoint)\n#### Instructions:\nTo initiate a card charge transaction, call the {{evokeUrl}}/charge endpoint.  If you would like to include basic information to enhance the user experience in the pax terminal, you may optionally include line items and/or amount items.\n\n**The only required field to initiate a charge is the \"Total\" field**\n\n#### Custom associated values\nThese values will be associated with the sale lifecycle, for tracking or associating a partner specific internal identifier.\n\nIf you would like to track the contextual sale using an internal partner specific id association, you may optionally set the \"PartnerSaleId\" variable to your custom identifier.  \n\nTo track the associated merchant location id, you may optionally set the \"PartnerMerchantLocationId\"\n\n#### Customer Card Tokenization\nSimilar to the custom associated values above, if you would like to store the customer's card as a token, which will not require a card to be used, and instead will operate on the tokenized card, include the partner specific internal customer id in the \"PartnerCustomerId\" field.\n\n### Refunding a previous charge (POST Refund endpoint)\nSpecify the {{SaleId}} in the url, and the amount to refund in the body.\n\n### Cancelling a previous charge (POST Cancel endpoint)\nSpecify the {{SaleId}} in the url to cancel the sale (a void or refund will be used depending if the transaction has already been processed on the specified terminal)\n\n### Requesting a signature (POST Signature endpoint)\nUse this endpoint if you would only like to request a signature and nothing else.\n\n### GET Terminals endpoint\nReturns the current onboarded terminals, and their connection status\n\n### GET Merchant Sales endpoint\nReturns merchant sales\n\n### GET location Sales endpoint\nReturns location sales\n\n### GET Sale Receipt endpoint\nReturns html sale receipt\n\n### GET Transaction Receipt endpoint\nReturns html transaction receipt",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Transactions",
			"item": [
				{
					"name": "Charge",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"postman.setEnvironmentVariable(\"SaleId\",JSON.parse(responseBody)[\"id\"]);\r",
									"postman.setEnvironmentVariable(\"TransactionId\",JSON.parse(responseBody)[\"transactionId\"]);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							},
							{
								"key": "TerminalSerialNumber",
								"value": "{{TerminalSerialNumber}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"LineItems\":[\r\n        {\r\n            \"ImageUrl\":\"https://www.aberdeenskitchen.com/wp-content/uploads/2016/07/Chorizo-Breakfast-Burritos-8.jpg\",\r\n            \"Name\":\"Breakfast Burrito\",\r\n            \"Quantity\":1,\r\n            \"Cost\":9.99,\r\n            \"Sum\":9.99\r\n        },\r\n        {\r\n            \"ImageUrl\":\"https://www.fortunefrenzy.co.uk/wp-content/uploads/2016/11/steak-dinner.jpg\",\r\n            \"Name\":\"Steak Dinner\",\r\n            \"Quantity\":3,\r\n            \"Cost\":24.99,\r\n            \"Sum\":74.97\r\n        }\r\n    ],\r\n    \"AmountItems\":[\r\n        {\r\n            \"Name\":\"Subtotal\",\r\n            \"Amount\": 84.96\r\n        },\r\n        {\r\n            \"Name\":\"Tax (10%)\",\r\n            \"Amount\": 8.50\r\n        },\r\n        {\r\n            \"Name\":\"Tip\",\r\n            \"Amount\": 5.0\r\n        },\r\n        {\r\n            \"Name\":\"Delivery Fee\",\r\n            \"Amount\": 3.00\r\n        }\r\n    ],\r\n    \"Total\": 101.46,\r\n    \"PartnerSaleId\":\"MyOptionalSaleId-{{$randomUUID}}\",\r\n    \"PartnerMerchantLocationId\":\"MyOptionalMerchantLocationId-{{$randomUUID}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/charge",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"charge"
							]
						}
					},
					"response": []
				},
				{
					"name": "Customer Token Charge",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"postman.setEnvironmentVariable(\"SaleId\",JSON.parse(responseBody)[\"id\"]);\r",
									"postman.setEnvironmentVariable(\"TransactionId\",JSON.parse(responseBody)[\"transactionId\"]);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							},
							{
								"key": "TerminalSerialNumber",
								"value": "{{TerminalSerialNumber}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"LineItems\":[\r\n        {\r\n            \"ImageUrl\":\"https://www.aberdeenskitchen.com/wp-content/uploads/2016/07/Chorizo-Breakfast-Burritos-8.jpg\",\r\n            \"Name\":\"Breakfast Burrito\",\r\n            \"Quantity\":1,\r\n            \"Cost\":9.99,\r\n            \"Sum\":9.99\r\n        },\r\n        {\r\n            \"ImageUrl\":\"https://www.fortunefrenzy.co.uk/wp-content/uploads/2016/11/steak-dinner.jpg\",\r\n            \"Name\":\"Steak Dinner\",\r\n            \"Quantity\":3,\r\n            \"Cost\":24.99,\r\n            \"Sum\":74.97\r\n        }\r\n    ],\r\n    \"AmountItems\":[\r\n        {\r\n            \"Name\":\"Subtotal\",\r\n            \"Amount\": 84.96\r\n        },\r\n        {\r\n            \"Name\":\"Tax (10%)\",\r\n            \"Amount\": 8.50\r\n        },\r\n        {\r\n            \"Name\":\"Tip\",\r\n            \"Amount\": 5.0\r\n        },\r\n        {\r\n            \"Name\":\"Delivery Fee\",\r\n            \"Amount\": 3.00\r\n        }\r\n    ],\r\n    \"Total\": 101.46,\r\n    \"PartnerCustomerId\":\"MyOptionalCustomerId-{{$randomUUID}}\",\r\n    \"PartnerSaleId\":\"MyOptionalSaleId-{{$randomUUID}}\",\r\n    \"PartnerMerchantLocationId\":\"MyOptionalMerchantLocationId-{{$randomUUID}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/charge",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"charge"
							]
						}
					},
					"response": []
				},
				{
					"name": "Cancel",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							},
							{
								"key": "TerminalSerialNumber",
								"value": "{{TerminalSerialNumber}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/sale/{{SaleId}}/cancel",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"sale",
								"{{SaleId}}",
								"cancel"
							]
						}
					},
					"response": []
				},
				{
					"name": "Refund",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							},
							{
								"key": "TerminalSerialNumber",
								"value": "{{TerminalSerialNumber}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"Amount\": 50.0\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/sale/{{SaleId}}/refund",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"sale",
								"{{SaleId}}",
								"refund"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Sale Receipt",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/partners/{{partnerId}}/sales/{{saleId}}/receipt",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"partners",
								"{{partnerId}}",
								"sales",
								"{{saleId}}",
								"receipt"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Transaction Receipt",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/transactions/{{transactionId}}/receipt",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"transactions",
								"{{transactionId}}",
								"receipt"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Miscellaneous",
			"item": [
				{
					"name": "Signature",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"postman.setEnvironmentVariable(\"SignatureId\",JSON.parse(responseBody)[\"signatureId\"]);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							},
							{
								"key": "TerminalSerialNumber",
								"value": "{{TerminalSerialNumber}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/signatures",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"signatures"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Terminals",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/terminals",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"terminals"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Reporting",
			"item": [
				{
					"name": "Get Merchant Sales",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/merchants/{{merchantId}}/sales",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"merchants",
								"{{merchantId}}",
								"sales"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Location Sales",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "ApplicationToken",
								"value": "{{ApplicationToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{eVokeUrl}}/merchants/{{merchantId}}/locations/{{LocationId}}/sales",
							"host": [
								"{{eVokeUrl}}"
							],
							"path": [
								"merchants",
								"{{merchantId}}",
								"locations",
								"{{LocationId}}",
								"sales"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}